openapi: 3.0.0
info:
  title: Football Championship Management API
  description: API for managing championships, teams, players, matches, seasons, rankings, and statistics.
  version: 1.0.0
servers:
  - url: http://localhost:8080/api

paths:
  /players:
    get:
      summary: Retrieve all players
      parameters:
        - name: club
          in: query
          description: Filter players by club name
          required: false
          schema:
            type: string
            example: "FC Barcelona"  
        - name: name
          in: query
          description: Filter players by name
          required: false
          schema:
            type: string
            example: "Lionel Messi"  
        - name: ageMin
          in: query
          description: Minimum age filter
          required: false
          schema:
            type: integer
            example: 18 
        - name: ageMax
          in: query
          description: Maximum age filter
          required: false
          schema:
            type: integer
            example: 40  
      responses:
        '200':
          description: List of players
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Player'
        '500':
          description: Internal server error
    put:
      summary: Update a player
      parameters:
        - name: id
          in: query
          description: ID of the player to update
          required: true
          schema:
            type: string
            example: "1" 
        - name: notify
          in: query
          description: Whether to notify the player about the update
          required: false
          schema:
            type: boolean
            example: true  
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PlayerUpdate'
      responses:
        '200':
          description: Player updated successfully
        '400':
          description: Invalid data
        '404':
          description: Player not found
        '500':
          description: Internal server error

  /seasons:
    get:
      summary: Retrieve all seasons
      parameters:
        - name: includeInactive
          in: query
          description: Whether to include inactive seasons
          required: false
          schema:
            type: boolean
            example: false  
      responses:
        '200':
          description: List of seasons
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Season'
        '500':
          description: Internal server error
    post:
      summary: Add a new season
      parameters:
        - name: notifyTeams
          in: query
          description: Whether to notify all teams about the new season
          required: false
          schema:
            type: boolean
            example: true  
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Season'
      responses:
        '201':
          description: Season created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Season'
        '400':
          description: Invalid data
        '500':
          description: Internal server error

  /seasons/{seasonYear}/status:
    put:
      summary: Update the status of a season
      parameters:
        - name: seasonYear
          in: path
          required: true
          schema:
            type: string
            example: "2024"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - status
              properties:
                status:
                  type: string
                  example: "FINISHED" 
      responses:
        '200':
          description: Season status updated successfully
        '404':
          description: Season not found
        '400':
          description: Invalid data

  /clubs:
    get:
      summary: Retrieve all clubs
      parameters:
        - name: city
          in: query
          description: Filter clubs by city
          required: false
          schema:
            type: string
            example: "Madrid"  
        - name: name
          in: query
          description: Filter clubs by name
          required: false
          schema:
            type: string
            example: "FC Barcelona"  
        - name: active
          in: query
          description: Filter clubs by their activity status (active or inactive)
          required: false
          schema:
            type: boolean
            example: true  
        - name: minPlayers
          in: query
          description: Filter clubs by minimum number of players
          required: false
          schema:
            type: integer
            example: 11 
      responses:
        '200':
          description: List of clubs
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Club'
        '500':
          description: Internal server error
    put:
      summary: Update a club
      parameters:
        - name: id
          in: query
          description: ID of the club to update
          required: true
          schema:
            type: string
            example: "1"
        - name: notifyPlayers
          in: query
          description: Whether to notify all players in the club about the update
          required: false
          schema:
            type: boolean
            example: true 
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Club'
      responses:
        '200':
          description: Club updated successfully
        '400':
          description: Invalid data
        '404':
          description: Club not found
        '500':
          description: Internal server error

  /players/{id}/statistics/{seasonYear}:
    get:
      summary: Retrieve statistics for a player in a given season
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            example: "1"  
        - name: seasonYear
          in: path
          required: true
          schema:
            type: string
            example: "2024"  
      responses:
        '200':
          description: Player statistics retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Statistics'
        '404':
          description: Player or season not found
        '500':
          description: Internal server error

  /clubs/{id}/players:
    get:
      summary: Retrieve all players for a specific club
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            example: "2"  
      responses:
        '200':
          description: List of players in the club
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Player'
        '404':
          description: Club not found
        '500':
          description: Internal server error

  /clubs/statistics/{seasonYear}:
    get:
      summary: Retrieve statistics for all clubs in a given season
      parameters:
        - name: seasonYear
          in: path
          required: true
          schema:
            type: string
            example: "2024" 
      responses:
        '200':
          description: Club statistics retrieved successfully
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/ClubStatistics'
        '404':
          description: Season not found
        '500':
          description: Internal server error

components:
  schemas:
    Player:
      type: object
      required:
        - name
        - number
        - position
        - nationality
        - age
      properties:
        id:
          type: string
        name:
          type: string
          example: "Lionel Messi"  
        number:
          type: integer
          example: 10 
        position:
          type: string
          example: "Forward"  
        nationality:
          type: string
          example: "Argentinian"  
        age:
          type: integer
          example: 34 

    PlayerUpdate:
      type: object
      properties:
        name:
          type: string
          example: "Lionel Messi"
        number:
          type: integer
          example: 10
        position:
          type: string
          example: "Forward"
        nationality:
          type: string
          example: "Argentinian"
        age:
          type: integer
          example: 34

    Club:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
          example: "FC Barcelona"
        city:
          type: string
          example: "Barcelona"  

    Season:
      type: object
      required:
        - name
        - startDate
        - endDate
      properties:
        id:
          type: string
        name:
          type: string
          example: "Season 2024-2025" 
        startDate:
          type: string
          format: date
          example: "2024-09-01" 
        endDate:
          type: string
          format: date
          example: "2025-06-30"  

    Match:
      type: object
      properties:
        id:
          type: string
          example: "match_001"  
        homeTeam:
          type: string
          example: "Real Madrid"  
        awayTeam:
          type: string
          example: "FC Barcelona"
        date:
          type: string
          format: date-time
          example: "2025-05-01T21:00:00Z" 
        status:
          type: string
          example: "Scheduled" 

    Statistics:
      type: object
      properties:
        goals:
          type: integer
          example: 10 
        assists:
          type: integer
          example: 5  
        yellowCards:
          type: integer
          example: 2  
        redCards:
          type: integer
          example: 1  

    ClubStatistics:
      type: object
      properties:
        teamName:
          type: string
          example: "FC Barcelona"
        matchesPlayed:
          type: integer
          example: 38 
        goalsScored:
          type: integer
          example: 90  
        goalsConceded:
          type: integer
          example: 30  
        winPercentage:
          type: number
          format: float
          example: 0.75  # Example win percentage
